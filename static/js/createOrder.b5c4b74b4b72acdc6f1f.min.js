webpackJsonp([13,15],{158:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(4),n=a(o),i=r(3),d=a(i),c=r(9),p=a(c),A=r(2),s=r(27),u=a(s),l=r(14);t.default={data:function(){return{show:{editRemark:!1},orderData:{},list:[],types:[],formData:{code:"",comments:"",inoutManId:"",inoutTime:"",products:[],type:""}}},created:function(){},components:{editRemark:u.default},computed:(0,p.default)({},(0,l.mapState)(["userInfo","storeInfo"])),beforeRouteEnter:function(e,t,r){r(function(e){e.initData()})},methods:{initData:function(){var e=this;return(0,d.default)(n.default.mark(function t(){return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.formData.inoutTime=(new Date).format("yyyy-MM-dd HH:mm"),e.formData.inoutManId=e.userInfo.id||"",e.formData.type="",e.list=window.__store.filter(function(e){return e.count}),e.createOrderCode(),e.getIntoutType();case 6:case"end":return t.stop()}},t,e)}))()},createOrderCode:function(){var e=this;return(0,d.default)(n.default.mark(function t(){var r;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.$Loading.open(),t.next=3,(0,A.createOrderCode)("盘点"==e.$route.query.type?"check":"inout");case 3:r=t.sent,e.$Loading.close(),r.success&&(e.orderData=r.data);case 6:case"end":return t.stop()}},t,e)}))()},selectDate:function(){var e=this;window.JSBridge.getData("getTime",function(t){e.formData.inoutTime=t,e.selcetTime()},{title:"选择日期",currentTime:"",minTime:"",maxTime:(new Date).format("yyyy-MM-dd")})},selcetTime:function(e,t){var r=this;window.JSBridge.getData("getTime",function(e){r.formData.inoutTime+=" "+e},{title:"选择时间",currentTime:"",minTime:"",maxTime:(new Date).format("yyyy-MM-dd"),interval:1})},editRemark:function(e){this.formData.comments=e},getIntoutType:function(){var e=this;return(0,d.default)(n.default.mark(function t(){var r,a;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r="出库"==e.$route.query.type?"STOCK_OUT":"STOCK_IN",t.next=3,(0,A.getListByCode)(r);case 3:a=t.sent,a.success&&(e.types=a.data.filter(function(e){return e.value.slice(2,4)>=10}));case 5:case"end":return t.stop()}},t,e)}))()},createOrder:function(){var e=this;return(0,d.default)(n.default.mark(function t(){var r,a;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.formData.type){t.next=2;break}return t.abrupt("return",e.$Toast({message:"请选择"+e.$route.query.type+"类型"}));case 2:return e.list.forEach(function(t){t.productQuantity=t.count,t.inoutType="出库"==e.$route.query.type?10:20}),e.formData.code=e.orderData.code,e.formData.products=e.list,r=(0,p.default)({},e.formData),e.$Loading.open(),t.next=9,(0,A.createInoutOrder)(r);case 9:a=t.sent,e.$Loading.close(),a.success&&(e.$Toast({message:e.$route.query.type+"成功"}),window.__store=null,e.$router.go(-2));case 12:case"end":return t.stop()}},t,e)}))()},addInventOrder:function(){var e=this;return(0,d.default)(n.default.mark(function t(){var r,a;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("盘点"==e.$route.query.type||e.formData.type){t.next=2;break}return t.abrupt("return",e.$Toast({message:"请选择盘点类型"}));case 2:return e.list.forEach(function(e){e.currentProductQuantity=e.count,e.stockProductQuantity=e.productQuantity}),e.formData.code=e.orderData.code,e.formData.inventoryTime=e.formData.inoutTime,e.formData.inventoryManId=e.formData.inoutManId,e.formData.products=e.list,r=(0,p.default)({},e.formData),e.$Loading.open(),t.next=11,(0,A.addInventOrder)(r);case 11:a=t.sent,e.$Loading.close(),a.success&&(e.$Toast({message:e.$route.query.type+"成功"}),window.__store=null,e.$router.replace({path:"/storeManage/stock",query:{tab:e.$route.query.type+"单"}}));case 14:case"end":return t.stop()}},t,e)}))()}}}},248:function(e,t,r){t=e.exports=r(6)(),t.push([e.id,'.router_page[data-v-df20c044]{width:100%;height:100%;background-color:#fff;box-sizing:border-box;padding:20px;-ms-flex-direction:column;flex-direction:column}.router_page .header[data-v-df20c044]{font-size:28px;color:#333}.router_page .header .h_cell[data-v-df20c044]{height:72px;line-height:72px}.router_page .header .h_cell span[data-v-df20c044]{margin-right:20px;color:#666}.router_page .header .h_cell .left[data-v-df20c044]{width:33.33%}.router_page .header .h_cell .right .r_left[data-v-df20c044]{text-align:center}.router_page .header .h_cell .right .r_right[data-v-df20c044]{text-align:right}.router_page .header .remark[data-v-df20c044]{font-size:24px;color:#666;margin-top:20px}.router_page .header .remark .text[data-v-df20c044]{color:#333;margin-left:20px;margin-right:66px}.router_page .header .remark .edit[data-v-df20c044]{color:#00a0e9;margin-left:60px}.router_page .page_body[data-v-df20c044]{padding-bottom:100px}.router_page .page_body .table[data-v-df20c044]{border-collapse:collapse;width:100%;font-size:28px;text-align:center;margin-top:20px}.router_page .page_body .table thead[data-v-df20c044]{background-color:#fff8f0;color:#7f674d}.router_page .page_body .table thead th[data-v-df20c044]{height:72px;line-height:72px}.router_page .page_body .table tbody tr td[data-v-df20c044]{border:1px solid #eee;height:80px;line-height:80px;color:#333}.router_page .page_body .table tbody tr td[data-v-df20c044]:first-child{border-left:none}.router_page .page_body .table tbody tr td[data-v-df20c044]:last-child{border-right:none}.router_page .page_body .cell_title[data-v-df20c044]{font-size:32px;color:#333;line-height:80px}.router_page .page_body .inout_type[data-v-df20c044]{-ms-flex-wrap:wrap;flex-wrap:wrap}.router_page .page_body .inout_type .button[data-v-df20c044]{height:80px;line-height:80px;padding:0 58px;text-align:center;font-size:28px;color:#333;border-radius:8px;border:2px solid #d5d5d5;margin-right:100px;margin-bottom:20px}.router_page .page_body .inout_type .button.active[data-v-df20c044]{border:none;color:#fff;background-color:#ff446a}.router_page .page_body .select_date[data-v-df20c044]{width:430px;height:60px;line-height:60px;border-radius:8px;border:1px solid #d5d5d5;font-size:24px;color:#666;text-indent:14px}.router_page .page_body .select_date[data-v-df20c044]:after{content:"";position:absolute;top:12px;right:14px;background-image:url('+r(5)+");position-repeat:no-repeat;height:33px;width:33px;background-position:-662px 0}.router_page .page_body .textarea[data-v-df20c044]{width:100%;height:214px;border-radius:8px;border:2px solid #d5d5d5;box-sizing:border-box;font-size:28px;color:#333;padding:12px 20px;overflow:auto}.router_page .confirm_btn[data-v-df20c044]{width:226px;height:80px;line-height:80px;text-align:center;font-size:28px;color:#fff;background-color:#ff446a;border-radius:8px;position:absolute;left:50%;margin-left:-113px;bottom:30px}","",{version:3,sources:["/./src/page/storeManage/createOrder.vue"],names:[],mappings:"AACA,8BAA8B,WAAW,YAAY,sBAAsB,sBAAsB,aAAa,AAAuF,0BAA0B,qBAAqB,CACnP,AACD,sCAAsC,eAAe,UAAU,CAC9D,AACD,8CAA8C,YAAY,gBAAgB,CACzE,AACD,mDAAmD,kBAAkB,UAAU,CAC9E,AACD,oDAAoD,YAAY,CAC/D,AACD,6DAA6D,iBAAiB,CAC7E,AACD,8DAA8D,gBAAgB,CAC7E,AACD,8CAA8C,eAAe,WAAW,eAAe,CACtF,AACD,oDAAoD,WAAW,iBAAiB,iBAAiB,CAChG,AACD,oDAAoD,cAAc,gBAAgB,CACjF,AACD,yCAAyC,oBAAoB,CAC5D,AACD,gDAAgD,yBAAyB,WAAW,eAAe,kBAAkB,eAAe,CACnI,AACD,sDAAsD,yBAAyB,aAAa,CAC3F,AACD,yDAAyD,YAAY,gBAAgB,CACpF,AACD,4DAA4D,sBAAsB,YAAY,iBAAiB,UAAU,CACxH,AACD,wEAAwE,gBAAgB,CACvF,AACD,uEAAuE,iBAAiB,CACvF,AACD,qDAAqD,eAAe,WAAW,gBAAgB,CAC9F,AACD,qDAA4E,mBAAmB,cAAc,CAC5G,AACD,6DAA6D,YAAY,iBAAiB,eAAe,kBAAkB,eAAe,WAAW,kBAAkB,yBAAyB,mBAAmB,kBAAkB,CACpO,AACD,oEAAoE,YAAY,WAAW,wBAAwB,CAClH,AACD,sDAAsD,YAAY,YAAY,iBAAiB,kBAAkB,yBAAyB,eAAe,WAAW,gBAAgB,CACnL,AACD,4DAA6D,WAAW,kBAAkB,SAAS,WAAW,+CAAqD,0BAA0B,YAAY,WAAW,4BAA4B,CAC/O,AACD,mDAAmD,WAAW,aAAa,kBAAkB,yBAAyB,sBAAsB,eAAe,WAAW,kBAAkB,aAAa,CACpM,AACD,2CAA2C,YAAY,YAAY,iBAAiB,kBAAkB,eAAe,WAAW,yBAAyB,kBAAkB,kBAAkB,SAAS,mBAAmB,WAAW,CACnO",file:"createOrder.vue",sourcesContent:["\n.router_page[data-v-df20c044]{width:100%;height:100%;background-color:#fff;box-sizing:border-box;padding:20px;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column\n}\n.router_page .header[data-v-df20c044]{font-size:28px;color:#333\n}\n.router_page .header .h_cell[data-v-df20c044]{height:72px;line-height:72px\n}\n.router_page .header .h_cell span[data-v-df20c044]{margin-right:20px;color:#666\n}\n.router_page .header .h_cell .left[data-v-df20c044]{width:33.33%\n}\n.router_page .header .h_cell .right .r_left[data-v-df20c044]{text-align:center\n}\n.router_page .header .h_cell .right .r_right[data-v-df20c044]{text-align:right\n}\n.router_page .header .remark[data-v-df20c044]{font-size:24px;color:#666;margin-top:20px\n}\n.router_page .header .remark .text[data-v-df20c044]{color:#333;margin-left:20px;margin-right:66px\n}\n.router_page .header .remark .edit[data-v-df20c044]{color:#00A0E9;margin-left:60px\n}\n.router_page .page_body[data-v-df20c044]{padding-bottom:100px\n}\n.router_page .page_body .table[data-v-df20c044]{border-collapse:collapse;width:100%;font-size:28px;text-align:center;margin-top:20px\n}\n.router_page .page_body .table thead[data-v-df20c044]{background-color:#FFF8F0;color:#7F674D\n}\n.router_page .page_body .table thead th[data-v-df20c044]{height:72px;line-height:72px\n}\n.router_page .page_body .table tbody tr td[data-v-df20c044]{border:1px solid #eee;height:80px;line-height:80px;color:#333\n}\n.router_page .page_body .table tbody tr td[data-v-df20c044]:first-child{border-left:none\n}\n.router_page .page_body .table tbody tr td[data-v-df20c044]:last-child{border-right:none\n}\n.router_page .page_body .cell_title[data-v-df20c044]{font-size:32px;color:#333;line-height:80px\n}\n.router_page .page_body .inout_type[data-v-df20c044]{-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap\n}\n.router_page .page_body .inout_type .button[data-v-df20c044]{height:80px;line-height:80px;padding:0 58px;text-align:center;font-size:28px;color:#333;border-radius:8px;border:2px solid #D5D5D5;margin-right:100px;margin-bottom:20px\n}\n.router_page .page_body .inout_type .button.active[data-v-df20c044]{border:none;color:#fff;background-color:#FF446A\n}\n.router_page .page_body .select_date[data-v-df20c044]{width:430px;height:60px;line-height:60px;border-radius:8px;border:1px solid #D5D5D5;font-size:24px;color:#666;text-indent:14px\n}\n.router_page .page_body .select_date[data-v-df20c044]::after{content:'';position:absolute;top:12px;right:14px;background-image:url(\"../../images/icon/sprite.png\");position-repeat:no-repeat;height:33px;width:33px;background-position:-662px 0\n}\n.router_page .page_body .textarea[data-v-df20c044]{width:100%;height:214px;border-radius:8px;border:2px solid #d5d5d5;box-sizing:border-box;font-size:28px;color:#333;padding:12px 20px;overflow:auto\n}\n.router_page .confirm_btn[data-v-df20c044]{width:226px;height:80px;line-height:80px;text-align:center;font-size:28px;color:#fff;background-color:#FF446A;border-radius:8px;position:absolute;left:50%;margin-left:-113px;bottom:30px\n}\n"],sourceRoot:"webpack://"}])},307:function(e,t,r){var a=r(248);"string"==typeof a&&(a=[[e.id,a,""]]);r(7)(a,{});a.locals&&(e.exports=a.locals)},365:function(e,t,r){r(307);var a=r(1)(r(158),r(430),"data-v-df20c044",null);e.exports=a.exports},430:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"router_page pr dp_flex"},[r("div",{staticClass:"header"},[r("div",{staticClass:"h_cell dp_flex"},[r("div",{staticClass:"left"},[r("span",[e._v(e._s(e.$route.query.type)+"单号")]),e._v(e._s(e.orderData.code))]),e._v(" "),r("div",{staticClass:"right flex1 dp_flex"},[r("div",{staticClass:"r_left flex1 line1"},[r("span",[e._v("门店")]),e._v(e._s(e.orderData.storeName))]),e._v(" "),r("div",{staticClass:"r_right flex1 line1 pr"},[r("span",[e._v("操作人")]),e._v(e._s(e.userInfo.nickname)+"\n                          ")])])]),e._v(" "),r("div",{staticClass:"remark"},[e._v(e._s(e.$route.query.type)+"商品 \n                  "),r("span",{staticClass:"edit",on:{click:function(t){e.$router.back(-1)}}},[e._v("修改"+e._s(e.$route.query.type)+"商品")])])]),e._v(" "),r("div",{staticClass:"page_body scroll flex1"},[r("table",{staticClass:"table"},[r("thead",[r("tr",[r("th",[e._v("商品编号")]),e._v(" "),r("th",[e._v("商品名称")]),e._v(" "),r("th",[e._v("规格")]),e._v(" "),r("th",[e._v(e._s("盘点"==e.$route.query.type?"库存":e.$route.query.type)+"数量")]),e._v(" "),"盘点"==e.$route.query.type?[r("th",[e._v("实际数量")]),e._v(" "),r("th",[e._v("差异数量")])]:e._e()],2)]),e._v(" "),r("tbody",e._l(e.list,function(t){return r("tr",[r("td",[e._v(e._s(t.productCode))]),e._v(" "),r("td",[e._v(e._s(t.productName))]),e._v(" "),r("td",[e._v(e._s(t.productSpec+t.productSpecUom))]),e._v(" "),r("td",[e._v(e._s("盘点"==e.$route.query.type?t.productQuantity:t.count))]),e._v(" "),"盘点"==e.$route.query.type?[r("td",[e._v(e._s(t.count))]),e._v(" "),r("td",{staticStyle:{color:"#FF446A"}},[e._v(e._s(t.count-t.productQuantity))])]:e._e()],2)}))]),e._v(" "),"盘点"!=e.$route.query.type?[r("div",{staticClass:"cell_title"},[e._v("请选择"+e._s(e.$route.query.type)+"类型")]),e._v(" "),r("div",{staticClass:"inout_type dp_flex"},e._l(e.types,function(t){return r("div",{staticClass:"button",class:{active:e.formData.type==t.value},on:{click:function(r){e.formData.type=t.value}}},[e._v(e._s(t.name))])}))]:e._e(),e._v(" "),r("div",{staticClass:"cell_title"},[e._v("请选择"+e._s(e.$route.query.type)+"时间")]),e._v(" "),r("div",{staticClass:"select_date pr",on:{click:function(t){e.selectDate("")}}},[e._v(e._s(e.formData.inoutTime))]),e._v(" "),r("div",{staticClass:"cell_title"},[e._v("备注")]),e._v(" "),r("div",{staticClass:"textarea",on:{click:function(t){e.show.editRemark=!0}}},[e._v(e._s(e.formData.comments))])],2),e._v(" "),"盘点"==e.$route.query.type?r("div",{staticClass:"confirm_btn",on:{click:e.addInventOrder}},[e._v("盘点完成")]):r("div",{staticClass:"confirm_btn",on:{click:e.createOrder}},[e._v("确定"+e._s(e.$route.query.type))]),e._v(" "),e.show.editRemark?r("editRemark",{attrs:{value:e.formData.comments},on:{finish:e.editRemark,closeTip:function(t){e.show.editRemark=!1}}}):e._e()],1)},staticRenderFns:[]}}});